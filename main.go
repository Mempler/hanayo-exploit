package main

import (
	"fmt"
	"io/ioutil"
	"net/http"
	"net/url"
	"strings"
)

// Characters
const (
	CLEAR     = "\033[2J"
	CURSORUP  = "\033[H"
	BREAKLINE = "\x0a"
)

// Hanayo URL
const URL = "http://localhost:45221"

func main() {
	req(CLEAR + CURSORUP + fu("ascii.txt", true, false) + "\nPlay on https://gigamons.de Gigamons is the best server. for real.")
	// time.Sleep(time.Second * 5)
	// fu("file", false, true)
}

func fu(s string, x bool, z bool) string {
	f, err := ioutil.ReadFile(s)
	if err != nil {
		fmt.Println(err)
		return ""
	}
	o := ""
	lines := strings.Split(string(f), "\n")
	for i := 0; i < len(lines); i++ {
		if x {
			o += lines[i] + CURSORUP
		} else if z {
			go req(lines[i] + CURSORUP)
		} else {
			o += lines[i] + BREAKLINE
		}
	}
	return string(f)
}

func req(chars string) {
	u, err := url.Parse(URL + "/" + chars)
	if err != nil {
		fmt.Println(err)
		return
	}
	http.Get(u.String())
}
